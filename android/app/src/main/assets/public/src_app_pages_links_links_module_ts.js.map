{"version":3,"file":"src_app_pages_links_links_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACc;AAEd;AAEzC,MAAM,MAAM,GAAW;IACnB;QACI,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,kDAAS;KACvB;CACJ,CAAC;IAoDW,sBAAsB,SAAtB,sBAAsB;;AAAtB,sBAAsB;IAJlC,uDAAQ,CAAC;QACN,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KAC1B,CAAC;GACW,sBAAsB;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;AC9DU;AAEJ;AACM;AACqB;AAC3B;AACuB;AACnB;AACoB;AAGjE,MAAM,WAAW,GAAW;IAC1B;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,kDAAS;KACrB;CACF,CAAC;IAeW,eAAe,SAAf,eAAe;;AAAf,eAAe;IAb3B,uDAAQ,CAAC;QACR,OAAO,EAAE;YACP,uDAAW;YACX,yDAAY;YACZ,yEAAsB;YACtB,8EAAgB;YAChB,uDAAW;SACZ;QACD,YAAY,EAAE,CAAC,kDAAS,CAAC;QACzB,SAAS,EAAE;YACT,2EAAe;SAChB;KACF,CAAC;GACW,eAAe;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/B5B;AAEA;AACA;AAEA;AAIA;AAEA;AACA;AAEA;CAEA;;AACA;IAWae,SAAS,SAATA,SAAS;EAgCpBC,YACSC,UADT,EAESC,eAFT,EAGUC,KAHV,EAIUC,YAJV,EAKUC,WALV,EAMUC,GANV,EAOUC,SAPV,EAOoC;IAN3B;IACA;IACC;IACA;IACA;IACA;IACA;IApCV,qBAAgB,KAAhB;IAGA,oBAAe,EAAf;IACA,mBAAc,EAAd;IAGA,qBAAoC,IAAIhB,gDAAJ,CAAuB,CAAvB,CAApC;IACA,+BAA2C,KAAKiB,aAAL,CAAmBC,YAAnB,EAA3C;IAeA,YAAO,EAAP;IACA,gBAAW,EAAX;EAaK;;EAlBqC,IAAPC,OAAO;IACxC,OAAQ,KAAKC,KAAL,IAAc,KAAKA,KAAL,CAAWD,OAA1B,GAAqC,IAArC,GAA4C,KAAnD;EACD;;EAkBDE,WAAW;IACT,KAAKC,sBAAL,CAA4BC,WAA5B;EACD;;EAEDC,QAAQ;IACN,KAAKZ,KAAL,CAAWa,MAAX,CAAkBC,SAAlB,CACGD,MAAD,IAAmB;MACjB,KAAKE,UAAL,GAAkBF,MAAM,CAACE,UAAzB;MACA,KAAKC,QAAL,GAAgBH,MAAM,CAACG,QAAvB;IACD,CAJH;IAOA,KAAKC,QAAL,GAAgB,KAAKf,WAAL,CAAiBgB,WAAjB,EAAhB;IACA,KAAKC,IAAL,GAAY,KAAKjB,WAAL,CAAiBkB,OAAjB,EAAZ;IACA,KAAKC,aAAL,GAAqB,KAAKnB,WAAL,CAAiBoB,gBAAjB,EAArB;IAEA,KAAKC,aAAL,GAAqB,KAAKvB,KAAL,CAAWwB,IAAX,CAAgBV,SAAhB,CAClBW,iBAAD,IAAsB;MAEpB,MAAMC,UAAU,GAAkC,KAAK5B,UAAL,CAAgB6B,kBAAhB,CAAmC,KAAKZ,UAAxC,CAAlD;MAEA,MAAMa,SAAS,GAAiC,KAAK9B,UAAL,CAAgB+B,aAAhB,CAA8BH,UAA9B,CAAhD;MAEA,KAAKI,cAAL,GAAsBF,SAAtB;MAEA,KAAKlB,sBAAL,GAA8BrB,4CAAK,CACjC,KAAKyC,cAAL,CAAoBC,KADa,CAAL,CAE5BjB,SAF4B,CAG3BiB,KAAD,IAAU;QACR,KAAKvB,KAAL,GAAauB,KAAK,CAACC,IAAN,CAAW,KAAKC,YAAhB,CAAb;QACA,KAAKC,SAAL,GAAiB,KAAK1B,KAAtB;QACA,KAAK2B,UAAL;MACD,CAP2B,EAQ3BC,KAAD,IAAWC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CARiB,EAS5B,MAAMC,OAAO,CAACC,GAAR,CAAY,kCAAZ,CATsB,CAA9B;IAWD,CApBkB,EAqBlBF,KAAD,IAAWC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CArBQ,CAArB;EAuBD;;EAEDG,oBAAoB,CAACC,CAAD,EAAIC,CAAJ,EAAK;IACvB,IAAID,CAAC,IAAI,IAAL,IAAaC,CAAC,IAAI,IAAtB,EAA4B;MAC1B,OAAO,CAAP;IACD;;IACD,IAAID,CAAC,CAACE,QAAF,GAAaD,CAAC,CAACC,QAAnB,EAA6B;MAC3B,OAAO,CAAC,CAAR;IACD;;IACD,IAAIF,CAAC,CAACE,QAAF,GAAaD,CAAC,CAACC,QAAnB,EAA6B;MAC3B,OAAO,CAAP;IACD;;IACD,OAAO,CAAP;EACD;;EAEDT,YAAY,CAACO,CAAD,EAAIC,CAAJ,EAAK;IACf,IAAID,CAAC,CAACE,QAAF,GAAaD,CAAC,CAACC,QAAnB,EAA6B;MAC3B,OAAO,CAAC,CAAR;IACD;;IACD,IAAIF,CAAC,CAACE,QAAF,GAAaD,CAAC,CAACC,QAAnB,EAA6B;MAC3B,OAAO,CAAP;IACD;;IACD,OAAO,CAAP;EACD;;EAEDC,cAAc,CAACC,EAAD,EAAG;IACf,KAAKC,YAAL,GAAoBD,EAAE,CAACE,MAAH,CAAUC,KAA9B,CADe,CAEf;;IACA,KAAKZ,UAAL;EACD;;EAEDA,UAAU;IACR,MAAMa,KAAK,GAAI,KAAKC,WAAL,IAAoB,KAAKA,WAAL,KAAqB,IAA1C,GAAkD,KAAKA,WAAvD,GAAqE,EAAnF;IACA,KAAKf,SAAL,GAAiB,KAAKgB,UAAL,CAAgB,KAAK1C,KAArB,EAA4BwC,KAA5B,CAAjB;EACD;;EAEDE,UAAU,CAACC,IAAD,EAAOH,KAAP,EAAY;IACpB,MAAMI,KAAK,GAAGD,IAAI,CAACE,MAAL,CAAYC,IAAI,IAC5BA,IAAI,CAACC,KAAL,CAAWC,WAAX,GAAyBC,QAAzB,CAAkCT,KAAK,CAACQ,WAAN,EAAlC,KAA0DF,IAAI,CAACvC,UAAL,IAAmB,KAAK8B,YADtE,CAAd;IAGA,OAAOO,KAAP;EACD,CA1HmB,CA4HpB;EACA;;;EACAM,gBAAgB;IACd,KAAKnC,aAAL,CAAmBZ,WAAnB;EACD;;EAEDgD,SAAS,CAACC,OAAD,EAAQ;IACf,KAAK1D,WAAL,CAAiB2D,UAAjB,CAA4BD,OAA5B;EACD;;EAGKE,QAAQ;IAAA;;IAAA;MAEZ,IAAIC,KAAK,SAAS,KAAI,CAAC3D,SAAL,CAAe4D,MAAf,CAAsB;QACtCC,SAAS,EAAEzE,8DAD2B;QAEtC0E,QAAQ,EAAE;MAF4B,CAAtB,CAAlB;MAIAH,KAAK,CAACI,aAAN,GAAsBC,IAAtB,CAA2B,MAAK;QAC9B,KAAI,CAACC,GAAL,CAASC,aAAT,CAAuBC,SAAvB,CAAiCC,MAAjC,CAAwC,UAAxC,EAAoD,eAApD;MACD,CAFD;MAGAT,KAAK,CAACU,OAAN;IATY;EAUb;;EAEKC,UAAU,CAACC,MAAD,EAAiBC,WAAjB,EAAsCC,QAAtC,EAAsD;IAAA;;IAAA;MAEpE,IAAId,KAAK,SAAS,MAAI,CAAC3D,SAAL,CAAe4D,MAAf,CAAsB;QACtCC,SAAS,EAAExE,2DAD2B;QAEtCyE,QAAQ,EAAE,YAF4B;QAGtCY,cAAc,EAAE;UACd,UAAUH,MADI;UAEd,eAAeC,WAFD;UAGd,YAAYC;QAHE;MAHsB,CAAtB,CAAlB;MASAd,KAAK,CAACI,aAAN,GAAsBC,IAAtB,CAA2B,MAAK;QAC9B,MAAI,CAACC,GAAL,CAASC,aAAT,CAAuBC,SAAvB,CAAiCC,MAAjC,CAAwC,UAAxC,EAAoD,eAApD;MACD,CAFD;MAGAT,KAAK,CAACU,OAAN;IAdoE;EAerE;;EAEKM,SAAS,CAACF,QAAD,EAAWG,OAAX,EAAoBzB,KAApB,EAAyB;IAAA;;IAAA;MAEtC,IAAIQ,KAAK,SAAS,MAAI,CAAC3D,SAAL,CAAe4D,MAAf,CAAsB;QACtCC,SAAS,EAAEvE,oEAD2B;QAEtCwE,QAAQ,EAAE;MAF4B,CAAtB,CAAlB;MAIAH,KAAK,CAACI,aAAN,GAAsBC,IAAtB,CAA2B,MAAK;QAC9B,MAAI,CAACC,GAAL,CAASC,aAAT,CAAuBC,SAAvB,CAAiCC,MAAjC,CAAwC,UAAxC,EAAoD,eAApD;MACD,CAFD;MAGAT,KAAK,CAACU,OAAN;IATsC;EAUvC;;EAEDQ,QAAQ,CAACC,IAAD,EAAK;IACX,MAAMC,OAAO,GAAG,KAAKhF,GAAL,CAAS6D,MAAT,CAAgBkB,IAAhB,CAAhB,CADW,CAEX;IACA;;IACAC,OAAO,CAACC,EAAR,CAAW,UAAX,EAAuBtE,SAAvB,CAAiCuE,KAAK,IAAG;MACvCF,OAAO,CAACG,SAAR,CAAkB;QAAEC,IAAI,EAAE;MAAR,CAAlB;IACD,CAFD;IAGAJ,OAAO,CAACC,EAAR,CAAW,WAAX,EAAwBtE,SAAxB,CAAmCuE,KAAD,IAAU;MAC1ChD,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyB+C,KAAzB,EAD0C,CAE1C;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACD,CAVD,EAUGG,GAAG,IAAG;MACPnD,OAAO,CAACD,KAAR,CAAc,OAAd,EAAuBoD,GAAvB;IACD,CAZD;IAaAL,OAAO,CAACC,EAAR,CAAW,WAAX,EAAwBtE,SAAxB,CAAmCuE,KAAD,IAAU;MAC1CI,KAAK,CAAC,gBAAgBJ,KAAK,CAACK,OAAvB,CAAL;IACD,CAFD;IAGAP,OAAO,CAACC,EAAR,CAAW,MAAX,EAAmBtE,SAAnB,CAA8BuE,KAAD,IAAU,CACrC;IACD,CAFD;IAIAF,OAAO,CAACQ,IAAR;EACD;;AA5MmB;;;;;;;;;;;;;;;;;;;;UAsBnB7G,uDAAWA;IAAA8G,OAAC,gBAAD;;;UAQX7G,qDAASA;IAAA6G,OAAC,MAAD,EAAS;MAAEC,MAAM,EAAE,KAAV;MAAiBC,IAAI,EAAE9G,sDAAUA;IAAjC,CAAT;;;AA9BCY,SAAS,uDATrBf,yDAAS,CAAC;EACTkH,QAAQ,EAAE,WADD;EAETC,UAAAA,wDAFS;;AAAA,CAAD,CASY,GAATpG,SAAS,CAAT","sources":["./src/app/pages/links/links-routing.module.ts","./src/app/pages/links/links.module.ts","./src/app/pages/links/links.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LinksPage } from './links.page';\n\nconst routes: Routes = [\n    {\n        path: '',\n        component: LinksPage,\n    }\n];\n\n// const routes: Routes = [\n//     {\n//         path: '',\n//         component: LinksPage,\n//         children: [\n//             {\n//                 path: 'tab1',\n//                 children: [\n//                     {\n//                         path: '',\n//                         loadChildren: '../links/tab1.module#Tab1PageModule'\n//                     }\n//                 ]\n//             },\n//             {\n//                 path: 'tab2',\n//                 children: [\n//                     {\n//                         path: '',\n//                         loadChildren: '../links/tab2.module#Tab2PageModule'\n//                     }\n//                 ]\n//             },\n//             {\n//                 path: 'tab3',\n//                 children: [\n//                     {\n//                         path: '',\n//                         loadChildren: '../links/tab3.module#Tab3PageModule'\n//                     }\n//                 ]\n//             },\n//             {\n//                 path: '',\n//                 redirectTo: '/links/tab1',\n//                 pathMatch: 'full'\n//             }\n//         ]\n//     },\n//     {\n//         path: '',\n//         redirectTo: '/links/tab1',\n//         pathMatch: 'full'\n//     }\n// ];\n\n@NgModule({\n    imports: [RouterModule.forChild(routes)],\n    exports: [RouterModule],\n})\nexport class LinksPageRoutingModule { }\n","import { IonicModule } from '@ionic/angular';\nimport { Routes } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ComponentsModule } from 'app/components/components.module';\nimport { LinksPage } from './links.page';\nimport { LinksPageRoutingModule } from './links-routing.module';\nimport { FormsModule } from '@angular/forms';\nimport { FirebaseService } from '@app/services/Firebase.service';\n\n\nconst linksRoutes: Routes = [\n  {\n    path: '',\n    component: LinksPage\n  }\n];\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    LinksPageRoutingModule,\n    ComponentsModule,\n    FormsModule,\n  ],\n  declarations: [LinksPage],\n  providers: [\n    FirebaseService,\n  ]\n})\nexport class LinksPageModule { }\n","import { Component, OnInit, OnDestroy, HostBinding, ViewChild, ElementRef } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { ModalController, IonRouterOutlet } from '@ionic/angular';\nimport { ActivatedRoute, Params } from '@angular/router';\n\nimport { Observable, ReplaySubject, Subscription, merge } from 'rxjs';\n\nimport { LinksModel } from 'app/models/links.model';\nimport { DataStore, ShellModel } from 'app/shell/data-store';\nimport { FirebaseService } from '@app/services/Firebase.service';\n\nimport { CarritoService } from 'app/services/carrito.service';\nimport { CarritoPage } from '../carrito/carrito.page';\nimport { BehaviorSubject } from 'rxjs';\nimport { BuscarPage } from '../buscar/buscar.page';\nimport { ProductosPage } from '../productos/productos.page';\n// import { InAppBrowser } from '@awesome-cordova-plugins/in-app-browser/ngx';\nimport { InAppBrowser } from '@awesome-cordova-plugins/in-app-browser/ngx';\n\n@Component({\n  selector: 'app-links',\n  templateUrl: './links.page.html',\n  styleUrls: [\n    './styles/links.page.scss',\n    './styles/links.shell.scss',\n    './styles/links.responsive.scss'\n  ]\n})\nexport class LinksPage implements OnInit, OnDestroy {\n  subscriptions: Subscription;\n  rangeForm: FormGroup;\n  showAgeFilter = false;\n  servicioId: string;\n  servicio: string;\n  segmentValue = '';\n  searchQuery = '';\n  servicioIdbase: string;\n\n  searchSubject: ReplaySubject<any> = new ReplaySubject<any>(1);\n  searchFiltersObservable: Observable<any> = this.searchSubject.asObservable();\n\n  linksDataStore: DataStore<Array<LinksModel>>;\n  stateSubscriptionLinks: Subscription;\n\n  // Use Typescript intersection types to enable decorating the Array of firebase models with a shell model\n  // (ref: https://www.typescriptlang.org/docs/handbook/advanced-types.html#intersection-types)\n  links: Array<LinksModel> & ShellModel;\n  linksList: Array<LinksModel> & ShellModel;\n  dptoInicial: string;\n\n  @HostBinding('class.is-shell') get isShell() {\n    return (this.links && this.links.isShell) ? true : false;\n  }\n\n  cart = [];\n  products = [];\n  cartItemCount: BehaviorSubject<number>;\n\n  @ViewChild('cart', { static: false, read: ElementRef }) fab: ElementRef;\n\n  constructor(\n    public tllService: FirebaseService,\n    public modalController: ModalController,\n    private route: ActivatedRoute,\n    private routerOutlet: IonRouterOutlet,\n    private cartService: CarritoService,\n    private iab: InAppBrowser,\n    private modalCtrl: ModalController\n  ) { }\n\n  ngOnDestroy(): void {\n    this.stateSubscriptionLinks.unsubscribe();\n  }\n\n  ngOnInit() {\n    this.route.params.subscribe(\n      (params: Params) => {\n        this.servicioId = params.servicioId;\n        this.servicio = params.servicio;\n      }\n    );\n\n    this.products = this.cartService.getProducts();\n    this.cart = this.cartService.getCart();\n    this.cartItemCount = this.cartService.getCartItemCount();\n\n    this.subscriptions = this.route.data.subscribe(\n      (resolvedRouteData) => {\n\n        const dataSource: Observable<Array<LinksModel>> = this.tllService.getLinksDataSource(this.servicioId);\n\n        const dataStore: DataStore<Array<LinksModel>> = this.tllService.getLinksStore(dataSource);\n\n        this.linksDataStore = dataStore;\n\n        this.stateSubscriptionLinks = merge(\n          this.linksDataStore.state,\n        ).subscribe(\n          (state) => {\n            this.links = state.sort(this.compareLinks);\n            this.linksList = this.links;\n            this.searchList();\n          },\n          (error) => console.log(error),\n          () => console.log('stateSubscriptionLinks completed')\n        );\n      },\n      (error) => console.log(error)\n    );\n  }\n\n  compareDepartamentos(a, b) {\n    if (a == null || b == null) {\n      return 0;\n    }\n    if (a.posicion < b.posicion) {\n      return -1;\n    }\n    if (a.posicion > b.posicion) {\n      return 1;\n    }\n    return 0;\n  }\n\n  compareLinks(a, b) {\n    if (a.posicion < b.posicion) {\n      return -1;\n    }\n    if (a.posicion > b.posicion) {\n      return 1;\n    }\n    return 0;\n  }\n\n  segmentChanged(ev) {\n    this.segmentValue = ev.detail.value;\n    // Check if there's any filter and apply it\n    this.searchList();\n  }\n\n  searchList() {\n    const query = (this.searchQuery && this.searchQuery !== null) ? this.searchQuery : '';\n    this.linksList = this.filterList(this.links, query);\n  }\n\n  filterList(list, query) {\n    const lista = list.filter(item =>\n      item.clase.toLowerCase().includes(query.toLowerCase()) && item.servicioId == this.segmentValue\n    );\n    return lista;\n  }\n\n  // NOTE: Ionic only calls ngOnDestroy if the page was popped (ex: when navigating back)\n  // Since ngOnDestroy might not fire when you navigate from the current page, use ionViewWillLeave to cleanup Subscriptions\n  ionViewWillLeave() {\n    this.subscriptions.unsubscribe();\n  }\n\n  addToCart(product) {\n    this.cartService.addProduct(product);\n  }\n\n\n  async openCart() {\n\n    let modal = await this.modalCtrl.create({\n      component: CarritoPage,\n      cssClass: 'cart-modal'\n    });\n    modal.onWillDismiss().then(() => {\n      this.fab.nativeElement.classList.remove('animated', 'bounceOutLeft')\n    });\n    modal.present();\n  }\n\n  async openSearch(titulo: string, categoriaId: string, tiendaId: string) {\n\n    let modal = await this.modalCtrl.create({\n      component: BuscarPage,\n      cssClass: 'cart-modal',\n      componentProps: {\n        'titulo': titulo,\n        'categoriaId': categoriaId,\n        'tiendaId': tiendaId\n      }\n    });\n    modal.onWillDismiss().then(() => {\n      this.fab.nativeElement.classList.remove('animated', 'bounceOutLeft')\n    });\n    modal.present();\n  }\n\n  async openClase(tiendaId, claseId, clase) {\n\n    let modal = await this.modalCtrl.create({\n      component: ProductosPage,\n      cssClass: 'cart-modal'\n    });\n    modal.onWillDismiss().then(() => {\n      this.fab.nativeElement.classList.remove('animated', 'bounceOutLeft')\n    });\n    modal.present();\n  }\n\n  openLink(link) {\n    const browser = this.iab.create(link);\n    // browser.executeScript(...);\n    // browser.insertCSS(...);\n    browser.on('loadstop').subscribe(event => {\n      browser.insertCSS({ code: \"body{color: red;\" });\n    });\n    browser.on('loadstart').subscribe((event) => {\n      console.log('loadstart', event);\n      // if (event.url === compareURL) {\n      //   console.log('url', event.url);\n      //   // this.navCtrl.setRoot(ConfirmationPage, {\n      //   //   orderId: this.orderId\n      //   // })\n      //   browser.close();\n      //   console.log('browser closed');\n      // }\n    }, err => {\n      console.error('error', err);\n    });\n    browser.on('loaderror').subscribe((event) => {\n      alert('loaderror: ' + event.message);\n    });\n    browser.on('exit').subscribe((event) => {\n      // alert('exit: ' + event);\n    });\n\n    browser.show();\n  }\n\n}\n"],"names":["Component","HostBinding","ViewChild","ElementRef","ModalController","IonRouterOutlet","ActivatedRoute","ReplaySubject","merge","FirebaseService","CarritoService","CarritoPage","BuscarPage","ProductosPage","InAppBrowser","LinksPage","constructor","tllService","modalController","route","routerOutlet","cartService","iab","modalCtrl","searchSubject","asObservable","isShell","links","ngOnDestroy","stateSubscriptionLinks","unsubscribe","ngOnInit","params","subscribe","servicioId","servicio","products","getProducts","cart","getCart","cartItemCount","getCartItemCount","subscriptions","data","resolvedRouteData","dataSource","getLinksDataSource","dataStore","getLinksStore","linksDataStore","state","sort","compareLinks","linksList","searchList","error","console","log","compareDepartamentos","a","b","posicion","segmentChanged","ev","segmentValue","detail","value","query","searchQuery","filterList","list","lista","filter","item","clase","toLowerCase","includes","ionViewWillLeave","addToCart","product","addProduct","openCart","modal","create","component","cssClass","onWillDismiss","then","fab","nativeElement","classList","remove","present","openSearch","titulo","categoriaId","tiendaId","componentProps","openClase","claseId","openLink","link","browser","on","event","insertCSS","code","err","alert","message","show","args","static","read","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}