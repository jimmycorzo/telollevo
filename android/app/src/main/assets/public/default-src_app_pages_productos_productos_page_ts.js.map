{"version":3,"file":"default-src_app_pages_productos_productos_page_ts.js","mappings":"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","sources":["./src/app/models/titulos.model.ts","./src/app/pages/productos/productos.page.ts"],"sourcesContent":["import { Observable } from \"rxjs\";\n\nexport class TitulosModel {\n  productoId: string;\n  titulo: string;\n  seleccionado: string;\n  seleccionadores: Array<SeleccionadoresModel> = [];\n\n  constructor() {\n  }\n}\n\nexport class SeleccionadoresModel {\n  id: string;\n  adicional: number;\n  seleccionador: string;\n  seleccionado: boolean;\n  name: string;\n\n  constructor() {\n  }\n}\n\nexport class PedidosModel {\n  id: string;\n  tiendaId: string;\n  fecha: string;\n  pedido: string;\n  activo: boolean;\n  telefono: boolean;\n  pago: string;\n  direccion: string;\n  cancelado: string;\n  elaborado: string;\n  entregado: string;\n\n  constructor() {\n  }\n}\n","import { Component, OnInit, HostBinding, ViewChild, ElementRef } from '@angular/core';\nimport { Observable, Subscription, merge, BehaviorSubject } from 'rxjs';\nimport { DataStore } from 'app/shell/data-store';\nimport { ModalController } from '@ionic/angular';\nimport { ActivatedRoute, Params } from '@angular/router';\nimport { MisProductosModel } from 'app/models/misproductos.model';\nimport { formatNumber } from '@angular/common';\nimport { DetallesPage } from 'app/pages/detalles/detalles.page';\nimport { ProductosModel } from 'app/models/productos.model';\nimport { CarritoPage } from 'app/pages/carrito/carrito.page';\nimport { CarritoService } from 'app/services/carrito.service';\nimport { BuscarPage } from 'app/pages/buscar/buscar.page';\nimport { TiendasModel } from 'app/models/tiendas.model';\nimport { SeleccionadoresModel, TitulosModel } from 'app/models/titulos.model';\nimport { FirebaseService } from 'app/services/firebase.service';\n\n@Component({\n  selector: 'app-productos',\n  templateUrl: './productos.page.html',\n  styleUrls: [\n    './styles/productos.page.scss',\n    './styles/productos.shell.scss',\n    './styles/productos.ios.scss',\n    './styles/productos.md.scss'\n  ],\n})\nexport class ProductosPage implements OnInit {\n  searchQuery = '';\n  subscriptions: Subscription;\n  segmentValue = '';\n  productos: Array<MisProductosModel>;\n  productosList: Array<MisProductosModel>;\n  filtered: Array<MisProductosModel>;\n  productosDataStore: DataStore<Array<MisProductosModel>>;\n  stateSubscriptionProductos: Subscription;\n  tiendaId: string;\n  tienda: TiendasModel;\n  claseId: string;\n  clase: string;\n  cerrada: boolean;\n  abre: string;\n  cierra: string;\n  proximamente: boolean = false;\n  cartItemCount: BehaviorSubject<number>;\n  cart = [];\n  products = [];\n\n  seleccionadores: Array<SeleccionadoresModel>;\n  titulos: Array<TitulosModel> = new Array<TitulosModel>();\n\n  @HostBinding('class.is-shell') get isShell() {\n    return (this) ? true : false;\n  }\n\n  @ViewChild('detalles', { static: false, read: ElementRef }) fab: ElementRef;\n\n  constructor(\n    public firebaseService: FirebaseService,\n    private modalCtrl: ModalController,\n    private route: ActivatedRoute,\n    private cartService: CarritoService\n  ) { }\n\n  ngOnDestroy(): void {\n    this.stateSubscriptionProductos.unsubscribe();\n  }\n\n  ngOnInit() {\n    this.route.params.subscribe(\n      (params: Params) => {\n        this.tiendaId = params.tiendaId;\n        this.tienda = params.tienda;\n        this.claseId = params.claseId;\n        this.clase = params.clase;\n        this.abre = params.abre;\n        this.cierra = params.cierra;\n        this.cerrada = JSON.parse(params.cerrada == 'undefined' ? false : params.cerrada);\n        this.proximamente = JSON.parse(params.proximamente == 'undefined' ? false : params.proximamente);\n\n        if (this.abre != 'null' && this.cierra != 'null') {\n          const hora = String(\"0\" + new Date().getHours()).slice(-2) + ':' + String(\"0\" + new Date().getMinutes()).slice(-2);\n          this.cerrada = !(hora >= this.abre && hora <= this.cierra);\n        }\n        else\n          this.cerrada = false;\n\n      }\n    );\n    this.loadProductos();\n    this.products = this.cartService.getProducts();\n    this.cart = this.cartService.getCart();\n    this.cartItemCount = this.cartService.getCartItemCount();\n\n  }\n\n  segmentChanged(ev) {\n    this.segmentValue = ev.detail.value;\n    // Check if there's any filter and apply it\n    this.searchList();\n  }\n\n  searchList() {\n    const query = (this.searchQuery && this.searchQuery !== null) ? this.searchQuery : '';\n    this.productosList = this.filterList(this.productos, query);\n  }\n\n  filterList(list, query) {\n    const lista = list.filter(item =>\n      item.producto.toLowerCase().includes(query.toLowerCase())\n    );\n    return lista;\n  }\n\n  ionViewWillLeave() {\n    this.subscriptions.unsubscribe();\n  }\n\n  searchForm() {\n    console.log('search form');\n  }\n\n  async openDetalleProducto(producto: ProductosModel) {\n    let modal = await this.modalCtrl.create({\n      component: DetallesPage,\n      cssClass: 'cart-modal',\n      componentProps: {\n        'producto': producto,\n        'cerrada': this.cerrada,\n        'proximamente': this.proximamente,\n        'abre': this.abre,\n        'cierra': this.cierra\n      }\n    });\n    modal.onWillDismiss().then(() => {\n      // this.fab.nativeElement.classList.remove('animated', 'bounceOutLeft')\n    });\n    modal.present();\n  }\n\n  async openCart() {\n\n    let modal = await this.modalCtrl.create({\n      component: CarritoPage,\n      cssClass: 'cart-modal'\n    });\n    modal.onWillDismiss().then(() => {\n      // this.fab.nativeElement.classList.remove('animated', 'bounceOutLeft')\n    });\n    modal.present();\n  }\n\n  getTotal() {\n    return this.cart.reduce((i, j) => i + j.precioVlr * j.amount, 0);\n  }\n\n  close() {\n    this.modalCtrl.dismiss();\n  }\n\n  checkout() {\n\n  }\n\n  loadProductos(event?) {\n    this.subscriptions = this.route.data.subscribe(\n      (resolvedRouteData) => {\n        var lastVisible: string = '';\n        if (this.productos) {\n          var lastVisible = this.productos[this.productos.length - 1].producto;\n        }\n        const dataSource: Observable<Array<MisProductosModel>> = this.firebaseService.loadProductos(this.tiendaId, this.claseId, lastVisible);\n        const dataStore: DataStore<Array<MisProductosModel>> = this.firebaseService.getProductosStore(dataSource);\n        this.productosDataStore = dataStore;\n\n        // Keep track of the subscription to unsubscribe onDestroy\n        // Merge filteredData with the original dataStore state\n        this.stateSubscriptionProductos = merge(\n          this.productosDataStore.state,\n        ).subscribe(\n          (state) => {\n            state.forEach(element => {\n              var presentacionTxt = '';\n              var valorUnidadTxt = '';\n              if (element != null) {\n                // element.producto = element.producto.toLowerCase();\n                element.descuentoPorc = 0;\n                var hoy: string = new Date().toISOString().substring(0, 10);\n                var desde: string = element.desde == \"\" ? hoy : element.desde;\n                var hasta: string = element.hasta == \"\" ? hoy : element.hasta;\n                if (element.descuento > 0 && hoy >= desde && hoy <= hasta) {\n                  element.descuentoPorc = element.descuento;\n                  element.descuentoVlr = element.precio;\n                  element.precioVlr = (element.precio * (1.0 - element.descuento));\n                }\n                else {\n                  element.descuentoVlr = 0;\n                  element.precioVlr = element.precio;\n                }\n                if (element.cantidad > 1) {\n                  presentacionTxt = presentacionTxt + element.cantidad + ' unidades de ' + element.presentacion + ' ' + element.unidad + ' c/u'\n                  valorUnidadTxt = formatNumber(Number((element.precioVlr / element.cantidad)), 'en-US', '1.0-2') + ' x un';\n                }\n                else {\n                  presentacionTxt = presentacionTxt + element.presentacion + ' ' + element.unidad\n                  valorUnidadTxt = formatNumber(Number((element.precioVlr / element.presentacion)), 'en-US', '1.0-2') + ' x ' + element.unidad;\n                }\n                element.presentacionTxt = presentacionTxt + ' ($' + valorUnidadTxt + ')';\n                element.observaciones = '';\n                element.tiendaId = this.tiendaId;\n                element.tienda = this.tienda;\n\n                this.firebaseService.getSeleccionadores(element.id)\n                  .subscribe((result: any) => {\n                    var tituloBase = '';\n                    var titulos: Array<TitulosModel> = new Array<TitulosModel>();\n                    this.titulos = new Array<TitulosModel>();\n                    result.forEach(element => {\n                      if (element != null) {\n                        if (tituloBase != element.titulo) {\n                          tituloBase = element.titulo;\n                          const titulo = new TitulosModel();\n                          titulo.titulo = element.titulo;\n                          titulo.productoId = element.productoId;\n                          titulo.seleccionado = '';\n                          this.titulos.push(titulo);\n                        }\n                        var t: TitulosModel = this.titulos.find(t => t.titulo == tituloBase);\n                        var s: SeleccionadoresModel = new SeleccionadoresModel();\n                        s.id = element.id;\n                        if (element.adicional > 0) {\n                          s.seleccionador = element.seleccionador + ' (+$' + element.adicional + ')';\n                        }\n                        else {\n                          s.seleccionador = element.seleccionador;\n                        }\n                        s.adicional = element.adicional;\n                        s.seleccionado = false;\n                        s.name = '';\n                        t.seleccionadores.push(s);\n                        // titulos.push(t);\n                      }\n                    });\n                    element.titulos = this.titulos;\n                  });\n\n              }\n            });\n            if (this.productos)\n              this.productos = this.productos.concat(state);\n            else\n              this.productos = state;\n            this.productosList = this.productos;\n            this.searchList();\n            // console.log('lastvisible: ', lastVisible)\n            if (event) {\n              event.target.complete();\n            }\n          },\n          (error) => console.log(error),\n          () => console.log('stateSubscriptionProductos completed')\n        );\n      },\n      (error) => console.log(error)\n    );\n\n\n  }\n\n  loadMore(event) {\n    setTimeout(() => {\n      this.loadProductos(event);\n      if (this.productos.length == 100) {\n        event.target.disabled = true;\n      }\n    }, 500);\n  }\n\n  async openSearch(titulo: string, categoriaId: string, tiendaId: string) {\n\n    let modal = await this.modalCtrl.create({\n      component: BuscarPage,\n      cssClass: 'cart-modal',\n      componentProps: {\n        'titulo': titulo,\n        'categoriaId': categoriaId,\n        'tiendaId': this.tiendaId\n      }\n    });\n    modal.onWillDismiss().then(() => {\n      this.fab.nativeElement.classList.remove('animated', 'bounceOutLeft')\n    });\n    modal.present();\n  }\n\n}\n"],"names":["Component","HostBinding","ViewChild","ElementRef","merge","ModalController","ActivatedRoute","formatNumber","DetallesPage","CarritoPage","CarritoService","BuscarPage","SeleccionadoresModel","TitulosModel","FirebaseService","ProductosPage","constructor","firebaseService","modalCtrl","route","cartService","Array","isShell","ngOnDestroy","stateSubscriptionProductos","unsubscribe","ngOnInit","params","subscribe","tiendaId","tienda","claseId","clase","abre","cierra","cerrada","JSON","parse","proximamente","hora","String","Date","getHours","slice","getMinutes","loadProductos","products","getProducts","cart","getCart","cartItemCount","getCartItemCount","segmentChanged","ev","segmentValue","detail","value","searchList","query","searchQuery","productosList","filterList","productos","list","lista","filter","item","producto","toLowerCase","includes","ionViewWillLeave","subscriptions","searchForm","console","log","openDetalleProducto","modal","create","component","cssClass","componentProps","onWillDismiss","then","present","openCart","getTotal","reduce","i","j","precioVlr","amount","close","dismiss","checkout","event","data","resolvedRouteData","lastVisible","length","dataSource","dataStore","getProductosStore","productosDataStore","state","forEach","element","presentacionTxt","valorUnidadTxt","descuentoPorc","hoy","toISOString","substring","desde","hasta","descuento","descuentoVlr","precio","cantidad","presentacion","unidad","Number","observaciones","getSeleccionadores","id","result","tituloBase","titulos","titulo","productoId","seleccionado","push","t","find","s","adicional","seleccionador","name","seleccionadores","concat","target","complete","error","loadMore","setTimeout","disabled","openSearch","categoriaId","fab","nativeElement","classList","remove","args","static","read","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}